<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Game</title>
    <style>
        html, body {
            --transitionTime: 1s;
            --equationTransitionTime: 3s;
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            transition: all var(--transitionTime);
            
        }
        * {
            box-sizing: border-box;
        }
        button {
            background-color: #04AA6D;
            border-radius: 5px;
            font-size: 17px;
            padding: 6px 18px;
        }
        .pause-container {
            transition: all 2s ease-in-out;
            /* display: flex; */
            visibility: collapse;
            opacity: 0;
            height: 0;
            width: 0;
            /* transition: all 2s; */

        }
        .pause-content-container {
            width: 50%;
        }
        .unpaused {
            transition: all 2s ease-in-out;
            visibility: hidden;
        }
        .paused {
            transition: all 2s ease-in-out;
            opacity: 1;
            display: inline-block;
            visibility: visible;
            height: 100vh;
            width: 100vw;
            margin-top: 50vh;
            text-align: center;
            font-weight: bold;
            font-size: 4.5rem;

        }
        .game-container {
            margin-top: 12vh;
            text-align: center;
            transition: all var(--transitionTime);
            padding-left: 10px;
            padding-right: 10px;
            width: 100%;
            height: 100vh;
        }
        .math-container {
            /* animation: fadeOut 5s; */
            opacity: 1;
            justify-content: center;
            display: flex;
            transition: opacity .5s ease-in-out;

        }
        .math-container .tile:last-of-type {
            margin-right: 0;
        }
        .answer-option-container .tile:last-of-type {
            margin-right: 0;
        }
        .math-container.hidden {
            opacity: 0;
            transition: opacity var(--equationTransitionTime) ease-in-out; 
            /* fades out for ___ seconds, fades back in depending on transition on .math-container */
        }
        .answer-container {
            
        }
        .answer-option-container {
            display: flex;
            margin-top: 10px;
            justify-content: center;
            transition: all var(--transitionTime);
        }
        .level-container {
            display: flex;
            margin-bottom: 10px;
            justify-content: center;
            gap: 2px;
        }
        .level-tile {
            border: 1px solid #8080803d;
            width: 49px;
            height: 49px;
            line-height: 53.75px;
            background: transparent;
            color: black;
            font-size: 25px;
            /* margin-right: 5px; */
            box-sizing: border-box;
        }
        .level-one-tile {
            background: yellow;
        }
        .level-two-tile {
            background: orange;
        }
        .level-three-tile {
            background: blue;
        }
        .level-four-tile {
            background: purple;
        }
        .level-five-tile {
            background: green;
        }
        .tile {
            aspect-ratio: 1/1;
            width: 58px;
            /* height: 98px; */
            line-height: 1.5em;
            background: grey;
            text-align: center;
            color: white;
            font-size: 2.5rem;
            margin-right: 10px;
            box-sizing: border-box;
            transition: all var(--transitionTime);
        }
        .correct {
            /* box-sizing: border-box; */
            /* outline: 2px solid goldenrod; */
            background: goldenrod;
            border-radius: 50%;
            outline: 2px solid black;
            transition: all var(--transitionTime);

        }
        .false {
            color: red;
            transition: all var(--transitionTime);
            text-decoration: line-through;
        }
        .answer-option-hover:hover {
            background: lightgrey;
            cursor: pointer;
            transition: all var(--transitionTime);
        }
        .operator-container {
            
        }
        .number-container {
            /* 72274789 */
        }
        /* #mydiv {
            position: absolute;
            cursor: move;
            z-index: 10;
        } */

        /* on mobile where there is no hover, this makes it so the color doesn't change onClick and get stuck in the 'hover' state */
        @media (hover: none) {
            .answer-option-hover:hover {
                background: grey;
            }

}
    </style>
</head>
<div>
    <div class="pause-container">
        <span class="pause-content-container">
            <div>Game Paused</div>
            <button name="resume" type="button" onClick="resume()">Resume</button>
        </span>
    </div>
    <div class="game-container">
        <button name="start" type="button" onClick="init()">Start</button>
        <button name="pause" type="button" onClick="pause()">Pause</button>
        <h1>Math Game</h1>
        <h2>Score: <span class="score">0000</span></h2>
        <h2>Level: <span class="level">1</span></h2>
        <!-- <select name="name" class="input-container">
            <option class="tile"></option>
            <div class="tile"></div>
            <div class="tile"></div>
            <div class="tile"></div>
            <div class="tile"></div>
        </select> -->
        <div class="level-container">
            <div class="level-tile"></div>
            <div class="level-tile "></div>
            <div class="level-tile "></div>
            <div class="level-tile "></div>
            <div class="level-tile "></div>
        </div>
        <div class="math-container">
            <div class="number-container tile"></div>
            <div class="operator-container tile">+</div>
            <div class="number-container tile"></div>
            <div id="mydiv" class="equal-container tile">=</div>
            <div 
            class="answer-container tile">???</div>
        </div>
        <div class="answer-option-container">
            <div class="answer-option-hover answer-option tile"></div>
            <div class="answer-option-hover answer-option tile "></div>
            <div class="answer-option-hover answer-option tile "></div>
            <div class="answer-option-hover answer-option tile "></div>
            <div class="answer-option-hover answer-option tile "></div>
        </div>
    </div>
</div>
    <script>
        let isPaused = false;
        let pauseContainer = document.querySelectorAll(".pause-container");
        function pause() {
            // alert('game is paused');
            pauseContainer[0].classList.add("paused");
            console.log(isPaused);
            isPaused = !isPaused;
            console.log(isPaused);
        }
        function resume() {
            
            pauseContainer[0].classList.add("unpaused");
            pauseContainer[0].classList.remove("paused");
        }
        function scoreProgress(score) {
            for (let i = 0; i < score%6; i++) {
                console.log(score);                   
                }    
        }
        let levelTiles = document.querySelectorAll(".level-tile");
        let answerOptions = document.querySelectorAll(".answer-option");
        let numbers = [];
        let answer = [];
        let myScore = 0;
        let myTotalScore = 0;
        let myLevelScore = 0;
        let myLevel = 0;
        let numberOfAnswers = 5;
        let falseAnswers = [];
        let minInput = 0;
        let maxInput = 2.5;
        //make different levels
        // levelTiles[0].style.backgroundColor = 'blue';
        // levelTiles[1].style.backgroundColor = 'blue';
        // levelTiles[2].style.backgroundColor = 'blue';
        // levelTiles[3].style.backgroundColor = 'blue';
        // levelTiles[4].style.backgroundColor = 'blue';
       function checkLevel(){ //level one
        if(myTotalScore >= 5){
            myLevel = 1;
            minInput = 0;
            maxInput = 2.5;
        }
        //level two
        if(myTotalScore >= 10){
            myLevel = 2;
            minInput = 1;
            maxInput = 5;}
        //level three
        if(myTotalScore >= 15){
            myLevel = 3;
            minInput = 15;
            maxInput = 10;
            
        }
        //level four
        if(myTotalScore >= 20){
            myLevel = 4;
            minInput = 1;
            maxInput = 25;

        }
        //level five
        if(myTotalScore >= 25){
            myLevel = 5;
            minInput = 1;
            maxInput = 50;
        }}
        //1. make a random number between 0 and 9 randomNumber(min, max);
                function randomNumber(min, max) {
                    const myNumber = Math.floor(Math.random() * ((max + 1) - min)) + min;
                    console.log(myNumber);
                    return myNumber;
                }
        //add answer check event listener to answer option tiles
        //2. check to see if number clicked on was the answer
                //add event listeners to option tiles
               function addListener(){
                   answerOptions.forEach(x => x.addEventListener('click', checkAnswer));
               }
                
            // answerOptions.forEach(x => x.addEventListener('mouseenter', dragElement));
                    
                function addE(e){
                      e.target.addEventListener('click', checkAnswer);
                }
                function removeE(e){
                   
                      e.target.removeEventListener('click', checkAnswer);

               }
        //when answer is selected remove event listener
        //render board
        //create problem
        //create answers
        //place problem on board
        //place answers on board
        //
        //
        //
        
        
        
        

//TO DO
//3. Check that there are no duplicate answers in the answer options
//4. Clear the board and make another round

//5. keep track of correct rounds
//6. clear track if incorrect 
// document.querySelectorAll('.answer-container')[0].innerHTML = 'none';
   
       function checkAnswer(e){
           let selectedAnswer = parseInt(e.target.innerHTML); //force to be a number
            console.log(selectedAnswer);
            console.log(typeof parseInt(selectedAnswer));
            console.log(answer[0]);
            removeE(e);
            // dragElement(e.target);
            if(selectedAnswer === answer[0]) {
//3.5 When correct add one to the score
                // alert('Correct!');
                //add id to element
                e.target.classList.add('correct');
                e.target.classList.remove('answer-option-hover');
                //this removes the .hidden class so the problem area will show up again
                document.querySelectorAll('.math-container').forEach(el => {
                el.classList.remove('hidden');
            })
                myTotalScore++;
                myLevelScore++;
                document.querySelectorAll('.score')[0].innerHTML = myTotalScore;
                document.querySelectorAll('.level')[0].innerHTML = myLevel;
                if(myTotalScore < 6) {
                    levelTiles[myTotalScore - 1].style.backgroundColor = 'yellow';
                }
                if(myTotalScore === 6) {
                    myLevelScore = 1;
                }
                if(myTotalScore === 11) {
                    myLevelScore = 1;
                }
                if(myTotalScore === 16) {
                    myLevelScore = 1;
                }
                if(myTotalScore === 21) {
                    myLevelScore = 1;
                }
                if(myTotalScore === 25) {
                    // myLevelScore = 1;
                    document.querySelectorAll('.score')[0].innerHTML = 'WINNER!';
                    document.querySelectorAll('.level')[0].innerHTML = 'WINNER!';
                }
                if(myTotalScore > 5 && myTotalScore < 11) {
                    levelTiles[myLevelScore - 1].style.backgroundColor = 'orange';
                }
                if(myTotalScore > 10 && myTotalScore < 16) {
                    levelTiles[myLevelScore - 1].style.backgroundColor = 'blue';
                }
                if(myTotalScore > 15 && myTotalScore < 21) {
                    levelTiles[myLevelScore - 1].style.backgroundColor = 'purple';
                }
                if(myTotalScore > 20 && myTotalScore < 26) {
                    levelTiles[myLevelScore - 1].style.backgroundColor = 'green';
                }
                // e.target.classList.remove('correct');
                // clearStyling();
                // clearAnswerStyling();
                // makeOptions();
                setTimeout(clearAnswerStyling, 2000);
                // setTimeout(init, 5000);
                // e.target.classList.add('answer-option-hover');
                // init();
                
            } else {
                // alert('FALSE!!!!')
                e.target.classList.add('false');
                e.target.classList.remove('answer-option-hover');
                
            }
        }
        // make two random numbers and add them together
        function clearAnswerStyling() {
            document.querySelectorAll('.answer-option').forEach(el => {
                el.classList.add('answer-option-hover');
                el.classList.remove('false');
                el.classList.remove('correct');
            })
            setTimeout(init, 0);
        }
        function clearStyling(){
            //this adds the .hidden class so the problem area will slowly fade away
            document.querySelectorAll('.math-container').forEach(el => {
                el.classList.add('hidden');
            })
            // document.querySelectorAll('.answer-option').forEach(el => {
            //     el.classList.add('answer-option-hover');
            //     el.classList.remove('false');
            //     el.classList.remove('correct');
            // })
        }
        function makeProblem(){
            answer = [];
            numbers = [];
            console.log(answer);
            document.querySelectorAll('.number-container').forEach( item => {
                let number = randomNumber(minInput, maxInput);
                console.log("this is number ", number);
                item.innerHTML = number;
                console.log(number);
                numbers.push(number);
                console.log(number);
            })
            console.log(numbers);
            answer.push(numbers[0] + numbers[1]);
            console.log(answer);
            // document.getElementsByClassName('answer-container')[0].innerHTML = answer[0];
        }
        //make random numbers for the options
        function makeOptions(){
            //make numbers and put into an array falseAnswers
            
            makeProblem();
            falseAnswers = [];
            for (let i = 0; i < numberOfAnswers; i++) {             
                let firstNumber = randomNumber(minInput, maxInput);
                let secondNumber = randomNumber(minInput, maxInput);
                let falseAnswer = firstNumber + secondNumber;
                //below while loop checks to make sure there are not duplicate options
                while(falseAnswer === answer[0]||falseAnswers.includes(falseAnswer)){
                    firstNumber = randomNumber(minInput, maxInput);
                    secondNumber = randomNumber(minInput, maxInput);
                    falseAnswer = firstNumber + secondNumber;
                }
                falseAnswers.push(falseAnswer);
            }
            placeCorrectAnswer(falseAnswers, answer);
            answerOptions.forEach((el, index) => {
                el.innerHTML = falseAnswers[index];
                //add click listener
                el.addEventListener('click', checkAnswer);
            })
        }
           
        //choose a random slot and put in the correct answer
        function placeCorrectAnswer(incorrectAnswers, correctAnswer){
            incorrectAnswers.splice(randomNumber(0, 4), 1, correctAnswer[0]);
            return incorrectAnswers;
        }
        

        function init(){
            // makeProblem();
            clearStyling();
            // clearAnswerStyling();
            makeOptions();
            scoreProgress(myTotalScore);
            checkLevel();
            document.getElementsByName('start')[0].disabled = true;
            // e.target.classList.remove('correct');
            // placeCorrectAnswer(falseAnswers, answer);
            //reset answer-option styles
        }
        // init();
        function clearThis(){
            answerOptions.forEach(opt => opt.setAttribute('class', 'answer-option tile'));
            numbers = [];
            answer = [];
            falseAnswers = [];
        }
        
    </script>
</body>
</html>
